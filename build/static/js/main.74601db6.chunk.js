(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(0),r=t(1),c=t(14),s=t.n(c),a=t(3),u=t(4),l=t.n(u),i="/api/persons",b=function(){return l.a.get(i)},j=function(e){return l.a.post(i,e)},d=function(e,n){return l.a.put("".concat(i,"/").concat(e),n)},h=function(e){return l.a.delete("".concat(i,"/").concat(e))},f=function(e){var n=e.id,t=e.setPersons,r=e.name,c=e.setMessage,s=e.setErrorStyle;return Object(o.jsx)("span",{children:Object(o.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(r,"?"))&&h(n).then((function(){b().then((function(e){t(e.data),s({backgroundColor:"red",color:"white"}),c("".concat(r," has been removed from the phonebook!")),setTimeout((function(){c(null)}),5e3),console.log("removed person")}))}))},children:"delete"})})},m=function(e){var n=e.setFilterValue;return Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{children:"filter shown with"}),Object(o.jsx)("input",{onChange:function(e){return n(e.target.value)}})]})},O=function(e){var n=e.persons,t=e.filterValue,r=e.setPersons,c=e.setErrorStyle,s=e.setMessage;return Object(o.jsx)("div",{children:n.filter((function(e){return e.name.includes(t)})).map((function(e,n){return Object(o.jsxs)("p",{children:[e.name," ",e.number,Object(o.jsx)(f,{id:e.id,setPersons:r,name:e.name,setErrorStyle:c,setMessage:s})]},n)}))})},g=function(e){var n=e.name,t=e.number;return Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{onChange:n}),Object(o.jsx)("br",{}),"number: ",Object(o.jsx)("input",{onChange:t}),Object(o.jsx)("br",{})]})},p=function(e){var n=e.persons,t=e.setPersons,r=e.newName,c=e.newNumber,s=e.setMessage,a=e.setErrorStyle,u={name:r,number:c};return Object(o.jsx)("button",{type:"button",onClick:function(){n.some((function(e){return e.name===r}))||""===r?!n.some((function(e){return e.number===c}))&&""!==c&&window.confirm("".concat(r," is already added to the phonebook, replace the old number with a new one?"))?d(n.filter((function(e){return e.name.includes(r)}))[0].id,{name:r,number:c}).then((function(){b().then((function(e){a({backgroundColor:"blue",color:"white"}),s("The number of ".concat(r," has been changed.")),setTimeout((function(){s(null)}),5e3),t(e.data),console.log("".concat(r," number has been changed."))}))})).catch((function(e){a({backgroundColor:"red",color:"white"}),s("".concat(r," has already been removed from the server!")),setTimeout((function(){s(null)}),5e3),console.log(e)})):(a({backgroundColor:"yellow",color:"black"}),s("".concat(r," is already in the phonebook.")),setTimeout((function(){s(null)}),5e3)):j(u).then((function(e){t(n.concat(e.data)),a({backgroundColor:"green",color:"white"}),s("".concat(r," has been added to the phonebook!")),setTimeout((function(){s(null)}),5e3)}))},children:"add"})},x=function(e){var n=e.errorMessage,t=e.errorStyle;return null===n?null:(console.log("returning message"),Object(o.jsx)("div",{className:"error",style:t,children:Object(o.jsx)("h1",{children:n})}))},v=function(){var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],s=Object(r.useState)(""),u=Object(a.a)(s,2),l=u[0],i=u[1],j=Object(r.useState)(""),d=Object(a.a)(j,2),h=d[0],f=d[1],v=Object(r.useState)(""),w=Object(a.a)(v,2),k=w[0],y=w[1],S=Object(r.useState)(null),C=Object(a.a)(S,2),E=C[0],M=C[1],P=Object(r.useState)({}),N=Object(a.a)(P,2),T=N[0],V=N[1];Object(r.useEffect)((function(){console.log("effect"),b().then((function(e){console.log("promise fulfilled",e.data),c(e.data)}))}),[]),console.log(l);return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(x,{errorMessage:E,errorStyle:T}),Object(o.jsxs)("form",{children:[Object(o.jsx)(m,{setFilterValue:y}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(g,{name:function(e){e.preventDefault(),i(e.target.value)},number:function(e){e.preventDefault(),f(e.target.value)}}),Object(o.jsx)(p,{persons:t,setPersons:c,newName:l,newNumber:h,setMessage:M,setErrorStyle:V})]}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(O,{persons:t,filterValue:k,setPersons:c,setMessage:M,setErrorStyle:V})]})};t(38);s.a.render(Object(o.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.74601db6.chunk.js.map